<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>javaScript 시작</title>
</head>

<body>
    <ul id='list'></ul>
    <ul id='members'></ul>
    <table id='tbl' border='1'></table>

    <!-- <button onclick='changeColor()'>change color</button> -->
    <script>
        let numbers = [23, 34, 45, 6, 7, 54];
        let sum = 0;
        //forEach의 매개값으로 fucntion을 정의.
        //익명함수를 받는 메소드.
        numbers.forEach(function (a, b, c) {
            sum += a;
        });
        console.log(sum);

        let student = { sno: '1111', name: 'Hong', score: 80 };

        //A class may only have one constructor
        class Student {
            constructor(sno, name, score) {
                this.sno = sno;
                this.name = name;
                this.score = score;
            }
        }

        let students = [];
        students.push(student);
        students.push(new Student('2222', 'Hwang', 90));
        students.push(new Student('3333', 'Park', 75));

        let tbl = document.getElementsByTagName('table')[0];
        let tblTd = document.createElement('td');

        let thText = ['체크', '학번', '이름', '점수', '삭제'];

        let tblTr = document.createElement('tr');
        
        thText.forEach(function (val, idx, ary) {
            let tblTh = document.createElement('th');
            tblTh.appendChild(document.createTextNode(val));
            tblTr.appendChild(tblTh);
        });
        tbl.appendChild(tblTr);

        function createTr(val){
            tblTr = document.createElement('tr');
            let chk = document.createElement('input');
            chk.setAttribute('type', 'checkbox');
            tblTd = document.createElement('td');
            tblTd.appendChild(chk);
            tblTr.appendChild(tblTd);
            for (field in val) {
                tblTd = document.createElement('td');
                tblTd.appendChild(document.createTextNode(val[field]));
                tblTr.appendChild(tblTd);
            }
            let btn = document.createElement('button');
            btn.innerHTML = 'x';
            //btn.setAttribute('onclick','clickFnc()'); *** 
            btn.onclick = clickFnc;
            tblTd = document.createElement('td');
            tblTd.appendChild(btn);
            tblTr.appendChild(tblTd);

            tblTr.onmouseover = function () {
                this.style.backgroundColor = 'pink';
            }
            tblTr.onmouseout = function () {
                this.style.backgroundColor = '';
            }

            return tblTr;
        };

        students.forEach(function (val, idx, ary){
            let tr = createTr(val);
            tbl.appendChild(tr);
        });

        function clickFnc() {
            this.parentNode.parentNode.remove();
            console.log(this.parentNode.parentNode);
        }
    </script>
</body>

</html>